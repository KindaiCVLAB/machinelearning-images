cuda11.1-cudnn8:
  extends: .container-image-builder
  variables:
    ANACONDA: "2020.07"
    OPENCV: "4.4.0.46"
    TF_GPU: "2.5.0.dev20201221"
    TF_TYPE: "tf-nightly"
    KERAS: "2.4.3"
    TORCH: "1.8.0.dev20210108+cu110"
    TORCH_FILE: "https://download.pytorch.org/whl/nightly/cu110/torch-1.8.0.dev20210108%2Bcu110-cp38-cp38-linux_x86_64.whl"
    TORCH_VISION: "0.9.0.dev20210108+cu110"
    TORCH_VISION_FILE: "https://download.pytorch.org/whl/nightly/cu110/torchvision-0.9.0.dev20210108%2Bcu110-cp38-cp38-linux_x86_64.whl"
    TORCH_SUMMARY: "1.5.1"
    CUPY_CUDA: "8.2.0"
    JUPYTER: "2.2.9"
    CODE_SERVER: "3.8.0"
    NODEJS: "15"
    CONTAINER_VERSION: "cuda11.1-cudnn8"
  only:
    changes:
    - cuda11.1-cudnn8/*
    - .gitlab/docker-build/cuda11.1-cudnn8.yaml

cuda11.1-cudnn8-test:
  extends: .test-image-builder
  variables:
    ANACONDA: "2020.07"
    OPENCV: "4.4.0.46"
    TF_GPU: "2.5.0.dev20201221"
    TF_TYPE: "tf-nightly"
    KERAS: "2.4.3"
    TORCH: "1.8.0.dev20210108+cu110"
    TORCH_FILE: "https://download.pytorch.org/whl/nightly/cu110/torch-1.8.0.dev20210108%2Bcu110-cp38-cp38-linux_x86_64.whl"
    TORCH_VISION: "0.9.0.dev20210108+cu110"
    TORCH_VISION_FILE: "https://download.pytorch.org/whl/nightly/cu110/torchvision-0.9.0.dev20210108%2Bcu110-cp38-cp38-linux_x86_64.whl"
    TORCH_SUMMARY: "1.5.1"
    CUPY_CUDA: "8.2.0"
    JUPYTER: "2.2.9"
    CODE_SERVER: "3.8.0"
    NODEJS: "15"
    CONTAINER_VERSION: "cuda11.1-cudnn8"
  only:
    changes:
    - cuda11.1-cudnn8/*
    - .gitlab/docker-build/cuda11.1-cudnn8.yaml    

cuda11.1-cudnn8-unittest:
  extends: .unittest
  variables:
    ANACONDA: "2020.07"
    OPENCV: "4.4.0.46"
    TF_GPU: "2.5.0.dev20201221"
    TF_TYPE: "tf-nightly"
    KERAS: "2.4.3"
    TORCH: "1.8.0.dev20210108+cu110"
    TORCH_FILE: "https://download.pytorch.org/whl/nightly/cu110/torch-1.8.0.dev20210108%2Bcu110-cp38-cp38-linux_x86_64.whl"
    TORCH_VISION: "0.9.0.dev20210108+cu110"
    TORCH_VISION_FILE: "https://download.pytorch.org/whl/nightly/cu110/torchvision-0.9.0.dev20210108%2Bcu110-cp38-cp38-linux_x86_64.whl"
    TORCH_SUMMARY: "1.5.1"
    CUPY_CUDA: "8.2.0"
    JUPYTER: "2.2.9"
    CODE_SERVER: "3.8.0"
    NODEJS: "15"
    CONTAINER_VERSION: "cuda11.1-cudnn8"
  only:
    changes:
    - cuda11.1-cudnn8/*
    - .gitlab/docker-build/cuda11.1-cudnn8.yaml    
